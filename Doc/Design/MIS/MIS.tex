\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}
\hypersetup{
bookmarks=true, % show bookmarks bar?
colorlinks=true, % false: boxed links; true: colored links
linkcolor=red, % color of internal links (change box color with linkbordercolor)
citecolor=blue, % color of links to bibliography
filecolor=magenta, % color of file links
urlcolor=cyan % color of external links
}

\usepackage{array}

\input{../../Comments}
\newcounter{mnum}
\newcommand{\mthemnum}{M\themnum}
\newcommand{\mref}[1]{M\ref{#1}}

\newcommand{\progname}{Stock Prediction System}

\begin{document}

\title{Module Interface Specification for Stock Prediction System}

\author{Renjie Zhang}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
22/11/2017 & 1.0 & Create\\
28/11/2017 & 1.1 & Update\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/renjiezhang/CAS-741/blob/master/Doc/SRS/SRS.pdf}

\wss{Do you actually use any of your SRS symbols?  I had a quick look and I
  didn't see any examples.}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for
Stock Prediction System which is used to predict the future stock price based on the historical data. Complementary documents include the System Requirement Specifications
and Module Guide. The full documentation and implementation can be
found at \url{https://github.com/renjiezhang/CAS-741}.\\

\section{Notation}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}. The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}. For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
Python List &list & a python list consists of numbers and string\\
Python Plot & plot & a GUI plot generated by the system\\
\bottomrule
\end{tabular} 
\end{center}

\wss{It is better to not specify a specific programming language, like Python.
  Stay language neutral as long as you can.  Also, Python lists have all
  elements of the same type, and a plot is not a type.}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{description}
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Hardware-Hiding Module
\item [\refstepcounter{mnum} \mthemnum \label{mMain}:]Main Module
\item [\refstepcounter{mnum} \mthemnum \label{mInput}:] Data Input Module
\item [\refstepcounter{mnum} \mthemnum \label{mVolatility}:] Price Volatility Module
\item [\refstepcounter{mnum} \mthemnum \label{mMomentum}:] Price Momentum Module
\item [\refstepcounter{mnum} \mthemnum \label{mPrediction}:]Kernelling And Prediction Module
\item [\refstepcounter{mnum} \mthemnum \label{mPlot}:] Plot Module
\end{description}

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2} \\
\midrule

{Hardware-Hiding} & ~ \\
\midrule


\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module}
& Main Module\\
& Data Input Module\\
& Price Volatility Module\\
& Price Momentum Module\\
& Kernelling And Prediction Module\\
\midrule

\multirow{1}{0.3\textwidth}{Software Decision Module} & Data Plot Module\\

\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\wss{Kernelling isn't a software decision module?}

\newpage
~\newpage

\section{MIS of Main Module (\mref{mMain}) } 

\subsection{Module}
Main
\subsection{Uses}
Hardware-Hiding Module (\mref{mHH})

\subsection{Syntax}
NA
\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

main & - &$\mathbb{R}$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
NA
\subsubsection{Access Routine Semantics}

\noindent main():
\begin{itemize}
\item transition: Calls the Data Input Modules, Volatility Module, Momentum Module and Output Module with parameters and retrieve the returned data from them. 
\item output: The percentage of the prediction result. The range of the score is between -1 to 1. if the scoring is negative then the price is going to decrease otherwise increase. \\
\item exception: NA
\end{itemize}

\wss{There is not enough information here to build main.  Usually a module will
  only have a transition or an output.  Do you really mean output?  This implies
  that your program will return a single real number to whatever program calls
  main.  For your transition you should show the access program calls that will
  be used to modify the state of the other modules.}

\wss{It is nice if each new module starts on a new page.}

\section{MIS of Data Input Module (\mref{mInput}) } 

\subsection{Module}
Input Module
\subsection{Uses}
Main Module (\mref{mMain})
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

ReadCSV & char & list & IOError \\
\hline
\end{tabular}
\end{center}

\wss{The type char is a single character.  You probably mean string.}

\wss{The output type list is ambiguous.  What is the type of the elements in the
  list?}

\wss{If you are reading from a file, you need an environment variable to
  represent the external file.}

\subsection{Semantics}
\subsubsection{State Variables}
NA
\subsubsection{Access Routine Semantics}

\noindent ReadCSV():
\begin{itemize}
\item transition: Load the CSV file by the input file name and read the data of
  the date and close price column.  \wss{This is not a transition.  A transition
    changes the state of some module, or an environment variable.}
\item output: A python array of the date and price \wss{Do you need to define a
    new record type that stores date and price?  You could then have a list of
    elements of this new type.}
\item exception: Invalid file name and path. Invalid column name and data format
  in the file.  \wss{What is the name of the exception?  It should be shown here
  as well.}
\end{itemize}




\section{MIS of Price Volatility Module (\mref{mVolatility}) } 

\subsection{Module}
Volatility Module
\subsection{Uses}
Data Input Module (\mref{mInput})
~\newline
Main Module (\mref{mMain})
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{2cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

GetPriceVolatility & $\mathbb{R}^n$ ,$\mathbb{N}^n$ & $\mathbb{R}^n$ & NotFittedError \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
NumberOfDays: Number of Days\\ 
~\newline
Prices: A list of real numbers. It is the stock price of each days.\\
~\newline
PriceVolatility : A list of real numbers which represents the price valitility\\

\subsubsection{Access Routine Semantics}

\noindent GetPriceVolatility():
\begin{itemize}
\item transition: Calculate the price volatility based on the input parameters, number of days and prices.
\item output: A python array of the price volatility
\item exception: Improper price such as negative number.
\end{itemize}


\section{MIS of Price Momentum Module (\mref{mMomentum}) } 

\subsection{Module}
Momentum Module
\subsection{Uses}
Data Input Module (\mref{mInput})
~\newline
Main Module (\mref{mMain})
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{2cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

GetPriceMomentum & $\mathbb{R}^n$ ,$\mathbb{N}^n$ & $\mathbb{R}^n$ & NotFittedError \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
NumberOfDays: Number of Days\\ 
~\newline
Prices: A list of real numbers. It is the stock price of each days.\\
~\newline
PriceMomentum : A list of real numbers which represents the price momentum\\

\subsubsection{Access Routine Semantics}

\noindent GetPriceMomentum():
\begin{itemize}
\item transition: Calculate the price momentum based on the input parameters, number of days and prices.
\item output: A python array of the price momentum
\item exception: Improper price such as negative number.
\end{itemize}

\section{MIS of Kernelling And Prediction Module (\mref{mPrediction}) } 

\subsection{Module}
Predict Module
\subsection{Uses}
Data Input Module (\mref{mInput})
~\newline
Main Module (\mref{mMain})
~\newline
Volatility Module(\mref{mVolatility})
~\newline
Momentum Module(\mref{mMomentum})
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

Predict & char, $\mathbb{R}^n$ ,$\mathbb{N}^n$ & $\mathbb{R}$ &- \\
SVC &char &- & - \\ 
\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
Predict()
~\newline
Code: A string type variable represents the permanent code of the company\\ 
NumberofDays: The number of days from the records\\ 
~\newline
PriceVolatility: The price volatility list calculated from the Price Volatility Model\\
~\newline
PriceMomentum: The price momentum list calculated from the Price Momentum Model\\
~\newline
Score : The percentage of the prediction result. The range of the score is between -1 to 1. if the scoring is negative then the price is going to decrease otherwise increase. \\
~\newline
SVC()
~\newline
Kernel mode: kernel='rbf
\subsubsection{Access Routine Semantics}

\noindent Predict():
\begin{itemize}
\item transition: Calculate the array of the SVM for each company in the file using the result of price volatility and price momentum.
\item output: A python array of the score
\item exception: NA
\end{itemize}


\section{MIS of Plot Module (\mref{mPlot}) } 

\subsection{Module}
Plot Module
\subsection{Uses}
Data Input Module (\mref{mInput})
~\newline
Main Module (\mref{mMain})
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline

Plot & char, $\mathbb{R}^n$ &plot &- \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}
\subsubsection{State Variables}
Dates: The array of the dates of each record\\ 
~\newline
Prices: The array of the prices of each record\\ 
~\newline


\subsubsection{Access Routine Semantics}

\noindent Plot():
\begin{itemize}
\item transition: Plot the graphic interface of the record.
\item output: The plot with date on the x ray and price on the y ray.
\item exception: NA
\end{itemize}

\subsection{Semantics}
\subsubsection{State Variables}
Dates: The array of the dates of each record\\ 
~\newline
Prices: The array of the prices of each record\\ 
\subsubsection{Access Routine Semantics}

\noindent Plot():
\begin{itemize}
\item transition: Plot the graphic interface of the record.
\item output: The plot with date on the x ray and price on the y ray.
\item exception: NA
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\wss{There is not enough detail in your module specifications.  No programming
  could be done with the starting point of your MIS.  The equations that are in
  your SRS should appear in the MIS as well.  Your modules should either have a
  transition or an output, not both.  Your type information isn't consistent and
is often missing.  You need environment variables for files and for the screen.
The screen environment variable is used when you generate a plot.  If you have
state variables, there should be a transition specified that changes the state
of those state variables.  There also needs to be an obvious way to set their
initial state.}

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../ReferenceMaterial/References}
NA \wss{You have two citations that you didn't  include in your bib file.}

\newpage

\section{Appendix} \label{Appendix}

NA \wss{You could remove this section if you don't use it.}

\end{document}
